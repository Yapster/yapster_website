<polymer-element name="my-header">
    <template>
        <style>
            #header-poly {
                height: 60px;
            }
            #toolbar_header {
                background-color: #16d301;
            }
            #search_bar {
                margin-left: 33%;
                width: 30%;
                height: 25px;
                background-color: #c3f3bf;
                border-radius: 2px;
                border: 0;
                padding: 6px;
            }
            .button_search_bar {
                font-size: 13px;
                background: transparent;
                color: white;
            }

        </style>
        <core-header-panel flex id="header-poly">
            <core-toolbar id="toolbar_header">
                <input type="text" id="search_bar" placeholder="Search a user, library, yap..."/>
                <paper-button id="go_search" class="button_search_bar" role="button" on-tap="{{ goSearch }}">Search</paper-button>
                <paper-button id="cancel_search" class="button_search_bar" role="button" on-tap="{{ goCancel }}">Cancel</paper-button>
            </core-toolbar>
        </core-header-panel>
    </template>
    <script>
        Polymer({
            goSearch: function() {
                var url = "app/get_search_results/";
                var search = $('#search_bar').text();

                $('#column3').removeClass('tall_cover');
                $('#column2').removeClass('tall_cover');
                $('.current_playlist_user').removeClass('current_playlist_user_on');
                alert($('#search_bar').text());
                if ($('#search_bar').text() != "")
                {
                    $.ajax({
                        data : {
                            search: search
                        },
                        url : url,
                        type : "POST",
                        success: function(newData){
                            $('.to_delete').remove();
                            $('.search_active').addClass("to_delete").removeClass('search_active');
                            $('.empty_search').html(newData).addClass('search_active').removeClass('empty_search');
                            $('.search_active').after("<div class='search_results empty_search'></div>");
                        },
                        error: function(newData) {
                            $('.search_results').append(newData).toggleClass('search_active');
                        },
                    });
                }
            },
            goCancel: function() {
                $('.to_delete').remove();
                $('.search_results').removeClass('search_active').html("");
                $('.empty_search').prev().addClass('to_delete');
            }
        });
    </script>
</polymer-element>